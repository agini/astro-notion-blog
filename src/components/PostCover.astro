---
const props = Astro.props || {};
const notionCover = props.notionCover || "";
const slug = props.slug || "";
const title = props.title || "Cover";

const proxyBase = import.meta.env.PUBLIC_NOTION_IMAGE_PROXY || "";

// Local cover image path
const localCover = slug ? `/cover/${slug}.jpg` : "";
// Default cover image path
const defaultCover = '/cover/default.jpg';

// Cover image priority:
// 1. Notion cover (via proxy)
// 2. Local cover image
// 3. Default cover image
let coverUrl = defaultCover;

if (notionCover) {
  coverUrl = proxyBase ? `${proxyBase}?url=${encodeURIComponent(notionCover)}` : notionCover;
} else if (slug) {
  coverUrl = localCover;
}
---

<img src={coverUrl} alt={title} class="w-full h-auto rounded-lg" />
