---
const props = Astro.props || {};
const notionCover = props.notionCover || "";
const slug = props.slug || "";
const title = props.title || "Cover";
const date = props.date || "";   //

const proxyBase = import.meta.env.PUBLIC_NOTION_IMAGE_PROXY || "";

// Local cover path
const localCover = slug ? `/cover/${slug}.jpg` : "";
// Default cover path
const defaultCover = '/cover/default.jpg';

// Cover image priority: Notion cover → Local cover → Default cover
let coverUrl = defaultCover;

if (notionCover) {
  coverUrl = proxyBase ? `${proxyBase}?url=${encodeURIComponent(notionCover)}` : notionCover;
} else if (slug && localCover) {
  coverUrl = localCover;
}
---

<!-- Header cover image with overlay + title -->
<div class="relative w-full h-[45vh] md:h-[55vh] overflow-hidden">
  <!-- Cover image -->
  <img
    src={coverUrl}
    alt={title}
    class="absolute inset-0 w-full h-full object-cover"
  />

  <!-- Dark overlay for readability -->
  <div class="absolute inset-0 bg-black/40"></div>

  <!-- Title on cover -->
  <div class="absolute bottom-8 left-6 md:left-12">
    <h1 class="text-white text-3xl md:text-5xl font-bold drop-shadow-lg">
      {title}
    </h1>

    <!-- Optional: date under title -->
    {date && (
      <div class="text-white text-sm md:text-base mt-2 drop-shadow-md">
        {date}
      </div>
    )}
  </div>
</div>


<!-- Title below cover
<header class="w-full py-4 px-4 md:px-8 bg-white">
  <h1 class="text-3xl md:text-4xl font-bold text-center">{title}</h1>
</header> -->