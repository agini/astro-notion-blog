---
import { filePath } from '../lib/blog-helpers'

export interface Props {
  post: any
}

const { post } = Astro.props

// ğŸ¯ Worker APIï¼ˆå°æ–‡å­—ï¼‰ or NotionKitï¼ˆå¤§æ–‡å­—ï¼‰ ä¸¡å¯¾å¿œ
const rawImage =
  post.featuredImage ??
  post.FeaturedImage?.files?.[0]?.file?.url ??
  ''

let image = ''

if (rawImage) {
  if (import.meta.env.DEV) {
    // ğŸ”¥ é–‹ç™ºç’°å¢ƒï¼ˆViteï¼‰ã¯ CDN å¤‰æ›ã—ãªã„
    image = rawImage
  } else {
    // ğŸ”¥ æœ¬ç•ªã¯ NotionKit ã® static export äº’æ›ï¼ˆå­˜åœ¨ã—ãªã„å ´åˆã¯ãã®ã¾ã¾ï¼‰
    try {
      image = filePath(new URL(rawImage))
    } catch {
      image = rawImage // ã™ã§ã«å¤–éƒ¨URLãªã‚‰ãã®ã¾ã¾
    }
  }
}
---
{
  image && (
    <div class="post-featured-image">
      <img src={image} alt="Featured image of the post" />
    </div>
  )
}

<style>
  .post-featured-image {
    padding: 0.6rem 0 0.2rem;
  }
  .post-featured-image img {
    display: block;
    max-width: 100%;
    max-height: 20rem;
  }
</style>
